# Cursor Rules

## 1. 기술 판단 우선순위 규칙

- 모든 기술적 판단의 최종 기준은 **`/doc/ARCHITECTURE.md`**이다
- ARCHITECTURE.md와 충돌하거나 판단이 불명확한 상황이 발생할 경우:
  - **즉시 작업을 중단한다**
  - `/doc/TROUBLESHOOTING.md` 참조
  - 임의로 추정하거나 자체 판단하여 작업을 진행하지 않는다

---

## 2. 업무 시작 규칙

### 2-1. 작업 시작 트리거
- 사용자가 `@process` 또는 `process`를 입력하면 작업을 시작한다.

### 필수 선행 확인
작업 전 반드시 아래 문서를 순서대로 확인한다:

1. `.cursorrules` (본 문서)
2. `/doc/ARCHITECTURE.md`
3. 기존 코드베이스

기존 작업 맥락을 이해하지 않은 상태에서 코드 생성 또는 수정은 금지한다

---

## 3. 변경 및 주석 규칙

- 기능, 구조, UI 동작이 변경될 경우 반드시 주석을 남긴다
- 모든 주석은 **한글로 작성**한다
- 주석에는 아래 3가지 정보가 반드시 포함되어야 한다:

1. 변경 일자 (YYYY-MM-DD)
2. 변경 내용 요약
3. 변경 사유

```ts
// [2026-01-15]
// 헤더 레이아웃 구조 변경
// 공통 네비게이션 재사용성을 높이기 위해 단일 컴포넌트로 분리
```
- 모든 코드 주석, 설명, 문서는 **한글로 작성**한다
- 기술 명칭에 한해 영어 사용을 허용한다

---

## 4. 문제 해결 및 문서화 규칙

### 4.1 반복 발생 문제 자동 문서화

**다음과 같은 상황 발생 시 즉시 `/doc/TROUBLESHOOTING.md`에 기록한다:**

1. **같은 에러가 2회 이상 발생**하는 경우
2. **사용자가 "이 에러 계속 뜨는데", "또 발생했어" 등의 표현 사용** 시
3. **빌드/런타임 에러가 발생**하여 해결한 경우
4. **개발 환경 설정 문제**가 발생한 경우

### 4.2 문서화 프로세스

문제 해결 후 다음 순서로 진행:

1. **문제 해결**
   - 에러 메시지 및 스택 트레이스 확인
   - 원인 파악 및 해결책 적용
   - 정상 작동 확인

2. **TROUBLESHOOTING.md 업데이트**
   - 적절한 섹션에 새 항목 추가 (예: "2. 빌드 및 환경 문제")
   - 다음 형식으로 작성:
     ```markdown
     ### X.X [문제 제목]
     
     **문제**: [문제 설명]
     
     **증상**: (선택사항) [에러 메시지 또는 증상 설명]
     
     **원인**: (선택사항) [발생 원인 설명]
     
     **해결방안**:
     1. [해결 방법 1]
     2. [해결 방법 2]
     ...
     
     **방지책**:
     - ✅ [방지 방법 1]
     - ✅ [방지 방법 2]
     ...
     ```

3. **검증**
   - 문서에 추가된 내용이 명확한지 확인
   - 다른 개발자가 따라할 수 있는지 확인

### 4.3 자동 기록 예시

**사용자가 다음과 같이 말하면:**
- "이 에러 계속 뜨는데"
- "또 발생했어"
- "앞으로도 계속 발생하는 문제"

**→ 즉시 TROUBLESHOOTING.md에 기록**

### 4.4 자주 발생하는 문제 우선순위

다음 문제들은 특히 주의하여 기록:

- Next.js 빌드/캐시 에러
- 모듈 해석 에러 (`Cannot find module`)
- 타입 에러
- 스타일 적용 문제
- 개발 서버 실행 문제
- 환경 설정 문제

---

## 5. 프로세스 저장 규칙

### 5.1 @process 명령어

**사용자가 `@process` 또는 `process`를 입력하면 작업을 시작한다:**

1. 현재 세션의 작업 프로세스를 정리하여 `/process.md` 파일에 저장
2. 기존 `process.md` 파일이 있으면 최신 작업을 맨 위에 추가 (역순 정렬)

### 5.2 프로세스 문서 형식

`process.md` 파일에는 다음 정보가 포함되어야 한다:

```markdown
# 작업 프로세스 기록

## [YYYY-MM-DD HH:mm] 작업 세션

### 작업 목표
- [작업 목표 또는 사용자 요청사항]

### 주요 작업 내용
1. [작업 내용 1]
2. [작업 내용 2]
...

### 변경된 파일
- `path/to/file1.tsx` - [변경 내용 요약]
- `path/to/file2.tsx` - [변경 내용 요약]
...

### 완료된 기능
- ✅ [완료된 기능 1]
- ✅ [완료된 기능 2]
...

### 참고사항
- [기술적 결정 사항, 주의사항 등]

---

[이전 작업 기록...]
```

### 5.3 프로세스 저장 시 포함해야 할 정보

- **작업 일시**: YYYY-MM-DD HH:mm 형식
- **사용자 요청사항**: 사용자가 요청한 작업 내용
- **주요 변경사항**: 구현된 기능 및 변경된 코드
- **파일 목록**: 수정/생성된 파일 경로와 간단한 설명
- **완료 상태**: 완료된 작업과 미완료 작업 구분
- **기술적 결정**: 중요한 기술적 선택 사항이나 이유
- **문제 및 해결**: 발생한 문제와 해결 방법 (있는 경우)

### 5.4 자동 저장 규칙

`@process` 명령어 입력 시:

1. **즉시 프로세스 문서 생성/업데이트**
   - `/process.md` 파일이 없으면 생성
   - 파일이 있으면 최신 내용을 맨 위에 추가

2. **작업 내용 자동 추출**
   - 현재 대화 내역에서 작업 내용 추출
   - 주요 변경사항 및 완료된 기능 정리
   - Git 상태 확인하여 변경된 파일 목록 자동 포함

3. **사용자 확인**
   - 저장 완료 후 사용자에게 알림
   - 파일 위치 및 내용 미리보기 제공

### 5.5 예시

**사용자 입력:**
```
@process
```

**응답:**
1. 현재 작업 내용 정리
2. `/process.md` 파일에 저장
3. 저장 완료 메시지 출력

---

## 참고 문서

- `/doc/ARCHITECTURE.md` - 프로젝트 구조, 컴포넌트 관리, 기술 실행 규칙 종합 가이드
- `/doc/TROUBLESHOOTING.md` - 문제 해결 및 방지 가이드
- `/process.md` - 작업 프로세스 기록